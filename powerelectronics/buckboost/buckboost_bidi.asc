Version 4
SHEET 1 1128 868
WIRE 192 64 -16 64
WIRE 384 64 272 64
WIRE 528 64 384 64
WIRE 880 64 608 64
WIRE -160 96 -160 64
WIRE -16 96 -16 64
WIRE 384 96 384 64
WIRE 880 96 880 64
WIRE 1024 96 1024 64
WIRE -160 208 -160 160
WIRE -16 208 -16 176
WIRE -16 208 -160 208
WIRE 384 208 384 176
WIRE 384 208 -16 208
WIRE 880 208 880 176
WIRE 880 208 384 208
WIRE 1024 208 1024 160
WIRE 1024 208 880 208
WIRE 192 304 64 304
WIRE 560 304 288 304
WIRE 64 320 64 304
WIRE 880 336 848 336
WIRE 880 448 848 448
WIRE 400 544 320 544
WIRE 640 544 560 544
WIRE 320 576 320 544
WIRE 560 576 560 544
FLAG 624 288 Q1
FLAG 624 320 Q2
FLAG -16 64 V1
FLAG 880 64 V2
FLAG 256 16 0
FLAG 592 16 0
FLAG 64 400 0
FLAG 384 208 0
FLAG 848 288 Gate1
FLAG 848 400 Gate2
FLAG 848 336 mode1
FLAG 848 448 mode1
FLAG 912 272 Q1
FLAG 912 416 Q1
FLAG 912 304 Q2
FLAG 912 384 Q2
FLAG 320 832 0
FLAG 400 544 mode1
FLAG 576 832 0
FLAG 640 544 mode2
FLAG 320 640 V1
FLAG 560 640 V1
FLAG 416 608 V2
FLAG 656 608 V2
FLAG 208 16 Gate1
FLAG 544 16 Gate2
SYMBOL sw 288 64 R90
SYMATTR InstName S1
SYMBOL sw 624 64 R90
SYMATTR InstName S2
SYMBOL ind 368 80 R0
SYMATTR InstName L1
SYMATTR Value 150µ
SYMATTR SpiceLine Rser=1m Rpar=100k
SYMBOL LTspiceControlLibrary\\PulseModulations\\PWM 208 336 R0
SYMATTR Value Vin1=0 Vin2=1 Tperiod={1/f}
SYMATTR InstName U1
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime 560 240 R0
SYMATTR InstName U2
SYMATTR Value Tdead=1n
SYMATTR Value2 tripdt=1m*Tdead
SYMBOL LTspiceControlLibrary\\Math\\Functions\\if 896 336 M0
SYMATTR InstName U3
SYMBOL LTspiceControlLibrary\\Math\\Functions\\if 896 448 M0
SYMATTR InstName U4
SYMBOL voltage 320 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value {mode==1}
SYMBOL voltage 576 736 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value {mode==2}
SYMBOL cap -176 96 R0
SYMATTR InstName C2
SYMATTR Value {Cfilter}
SYMATTR SpiceLine Rser=1m
SYMBOL cap 1040 96 M0
SYMATTR InstName C1
SYMATTR Value {Cfilter}
SYMATTR SpiceLine Rser=1m
SYMBOL LTspiceControlLibrary\\Math\\Operands\\nle 352 624 R270
SYMATTR InstName U5
SYMBOL bv 64 304 M0
SYMATTR InstName B1
SYMATTR Value V=IF(V(mode1),0.6,0.4)
SYMBOL LTspiceControlLibrary\\Math\\Operands\\lt 592 624 R270
SYMATTR InstName U6
SYMBOL voltage -16 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1m
SYMATTR InstName V1
SYMATTR Value PULSE(50 25 0 {1m*T2} {1m*T2} {0.05*T2} {T2})
SYMBOL LTspiceControlLibrary\\Math\\Operands\\neg 400 640 M0
SYMATTR InstName U7
SYMBOL LTspiceControlLibrary\\Math\\Operands\\neg 640 640 M0
SYMATTR InstName U8
SYMBOL voltage 880 192 R180
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1m
SYMATTR InstName V2
SYMATTR Value PULSE(25 50 0 {1m*T2} {1m*T2} {0.25*T2} {T2})
TEXT 128 -112 Left 2 !.model SW SW(Ron=1n, Roff=10Meg, Vt=0.5, Vh=0)\n.model D D(Ron=1n, Roff=10Meg, Vfwd=1n)
TEXT -80 544 Left 2 !.param mode 1\n.param f 250k\n.param T 1/f\n.param T2 {2*T}\n.param Ncycles 500\n.param Cfilter {0.01*1k/(2*pi*f)}\n.tran  {Ncycles*T}
TEXT 8 496 Left 2 !.meas TRANS vout AVG V(V2)/V(V1) FROM {Ncycles*T*0.95}
TEXT 248 408 Left 2 !;.step param duty 0 1 0.01\n.param duty 0.6
